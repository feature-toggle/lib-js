var FeatureToggle;!function(){"use strict";FeatureToggle=function(e,t,s){void 0===s&&(s={}),this.VERSION="1.0",this.customerKey=e,this.environmentKey=t,this.options=this.extend({api:"https://api.featuretoggle.com",auth:null,cache_timeout:300,version:"v1",debug:!1},s),this.options.auth=this.customerKey+":"+this.environmentKey},FeatureToggle.prototype.extend=function(e,t){return void 0!==Object.assign?Object.assign(e,t):(Object.keys(t).forEach(function(s){e[s]=t[s]}),e)},FeatureToggle.prototype.apiRequest=function(e,t){var s=new XMLHttpRequest;s.open("GET",this.options.api+e),s.setRequestHeader("Authorization",this.options.auth),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("X-Accept-Version",this.options.version),s.setRequestHeader("User-Agent","FeatureToggle-JS/"+this.VERSION),s.onreadystatechange=function(){if(4===s.readyState){var e=JSON.parse(s.responseText),n={success:!1,message:""};switch(s.status){case 200:for(var o in e)void 0!==e[o]&&(n[o]=e[o]);break;default:n.message=e.error.message}t(n)}},s.send(null)},FeatureToggle.prototype.getFeatures=function(e){this.apiRequest("/features",function(t){return void 0!==t.features?e(null,t.features):e(t.message,null)})},FeatureToggle.prototype.isEnabled=function(e,t){this.apiRequest("/features/"+e,function(e){return void 0!==e.enabled?t(null,e.enabled):t(e.message,null)})}}();